{#if !isAuthed}
<div class="auth-dialog">
    <div class="dialog-content" style="color:#8394a8;">
        {translate('alerts.authenticate')}
    </div>
    <div class="dialog-footer" style="padding-bottom:25px;">
        <button
            on:click="onLoginHandler()"
            class="dialog-login-button"
        >{translate('alerts.login')}</button>
    </div>
</div>
{:else}
<div class="noselect order-main-dialog">
    <div class="cart" style="border-radius:5px;">
        <div
            class="header"
            style="padding-top:10px; font-size:16px; text-align:left;"
        >{translate('cart.header')}</div>
        <div class="cart-order">
            <div class="cart-order-form">
                <div
                    ref:warningContainer
                    class="cart-order-warning"
                    style="text-align: center;"
                >{@html translate('cart.warning', true)}</div>
                <table>
                    <tbody>
                        <tr class="cart-customer">
                            <td>
                                <label>{translate('cart.customer')}</label>
                            </td>
                            <td>
                                <input type="text" value="" />
                            </td>
                            <td>*</td>
                        </tr>
                        <tr class="cart-project">
                            <td>
                                <label>{translate('cart.project.name')}</label>
                            </td>
                            <td>
                                <input type="text" value="" />
                            </td>
                            <td>*</td>
                        </tr>
                        <tr class="cart-project-type">
                            <td>
                                <label>{translate('cart.project.type.title')}</label>                                    
                            </td>
                            <td>
                                <select>
                                    <option value="commercial">{translate('cart.project.type.commercial')}</option>
                                    <option value="internal">{translate('cart.project.type.internal')}</option>
                                    <option value="presale">{translate('cart.project.type.presale')}</option>
                                </select>                                  
                            </td>
                            <td>*</td>
                        </tr>
                        <tr class="cart-project-number">
                            <td>
                                <label>{translate('cart.project.number')}</label>
                            </td>
                            <td>
                                <input type="text" class="cart-project-number" value="" />
                            </td>
                            <td>*</td>
                        </tr>
                        <tr class="cart-person">
                            <td>
                                <label>{translate('cart.person')}</label>
                            </td>
                            <td>
                                <input type="text" value="{userInfo['FullName']}" />
                            </td>
                            <td>*</td>
                        </tr>
                        <tr class="cart-company">
                            <td>
                                <label>{translate('cart.company')}</label>
                            </td>
                            <td>
                                <input type="text" readonly value="{userInfo['Organization']}" />
                            </td>
                            <td></td>
                        </tr>
                        <tr class="cart-email">
                            <td>
                                <label>{translate('cart.email')}</label>
                            </td>
                            <td>
                                <input type="text" value="{userInfo['Email']}" />
                            </td>
                            <td>*</td>
                        </tr>
                        <tr class="cart-comment">
                            <td>
                                <label>{translate('cart.comment')}</label>
                            </td>
                            <td>                            
                                <textarea maxlength="1000"></textarea>
                            </td>
                            <td>                                
                            </td>
                        </tr>                  
                    </tbody>
                </table>                
            </div>
            <div class="cart-order-footer">                
                <button class="cart-order-submit">{translate('cart.submit')}</button>
            </div>
        </div>
    </div>
</div>
{/if}

<script>

    import Translations from 'scanex-translations';

    export default {

        data() {
            return {
                userInfo: {},
                permalink: '',
                isAuthed: false,
                isLoading: false,
                isSuccess: false,
                hasError: false,
                errorText: ''
            };
        },

        oncreate() {

            const warningContainer = this.refs.warningContainer;

            if (warningContainer) {

                const link = this.refs.warningContainer.querySelector('.link');
                const {permalink} = this.get();
                link.addEventListener('click', () => this.fire('warning', permalink));
            }
        },

        methods: {
            onLoginHandler() {
                this.fire('login');
            }
        },

        helpers: {
            translate(text, replaceBreaks = false) {

                if (replaceBreaks) {
                    return Translations.getText(text).replace(/\r\n/, '<br />');
                }

                return Translations.getText(text);
            }
        }

    }

</script>